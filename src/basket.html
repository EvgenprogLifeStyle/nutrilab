<!DOCTYPE html>
<html lang="ru">
    @@include('components/head.html', { "title":"Оформление заказа" })
    <body>
        @@include('components/header/header.html', {class:""})
        <main class="wrapper pt_180">
            <!-- <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css" /> -->

            <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&onload=initMap" type="text/javascript"></script>
            <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.3/themes/base/jquery-ui.css" />
            <div class="basket container mt_60">
                <h1 class="basket__title">Оформление заказа</h1>

                <form id="basket-form" class="basket__list flex dc">
                    <div class="basket__item">
                        <h3 class="basket__subtitle">Состав заказа:</h3>
                        <div class="pb">
                            <div class="pb__item flex">
                                <div class="pb__info">
                                    <a href="#" class="pb__name link-hover">Чекап кислотности желудочного сока</a>
                                    <div class="pb__list flex fw">
                                        <div>Nutri11</div>
                                        <div>Кровь</div>
                                        <div>12 дн</div>
                                    </div>
                                </div>
                                <div class="pb__price">5 210 ₽</div>
                                <button class="pb__clear">
                                    <svg class="icon">
                                        <use xlink:href="img/sprite.svg#clear"></use>
                                    </svg>
                                </button>
                            </div>
                            <div class="pb__item flex">
                                <div class="pb__info">
                                    <a href="#" class="pb__name link-hover">Чекап кислотности желудочного сока</a>
                                    <div class="pb__list flex fw">
                                        <div>Nutri11</div>
                                        <div>Кровь</div>
                                        <div>12 дн</div>
                                    </div>
                                </div>
                                <div class="pb__price">5 210 ₽</div>
                                <button class="pb__clear">
                                    <svg class="icon">
                                        <use xlink:href="img/sprite.svg#clear"></use>
                                    </svg>
                                </button>
                            </div>
                            <div class="pb__item flex">
                                <div class="pb__info">
                                    <a href="#" class="pb__name link-hover">Взятие биоматериала</a>
                                </div>
                                <div class="pb__price">1 200 ₽</div>
                                <button class="pb__clear">
                                    <svg class="icon">
                                        <use xlink:href="img/sprite.svg#clear"></use>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="promo flex fe">
                            <div class="input-box">
                                <label>Ваш промокод:</label>
                                <!-- Класс успешной проверки success
                                   <input type="text" class="input-box__input success" placeholder="Введите значение" value="NUTRI20" required data-parsley-required-message="Поле обязательно для заполнения" data-parsley-group="promo" /> -->
                                <input type="text" class="input-box__input" placeholder="Введите значение" required data-parsley-required-message="Поле обязательно для заполнения" data-parsley-group="promo" />
                            </div>
                            <button type="button" class="promo__btn btn btn-primary">Применить</button>
                        </div>
                    </div>
                    <div class="basket__item">
                        <div class="db">
                            <div class="db__head flex sb cv">
                                <h3 class="basket__subtitle">Где хотите сдать анализы?</h3>
                                <div class="db__btns flex">
                                    <div class="db__btn btn tab-btn active" data-id="0" id="adres">В офисе</div>
                                    <div class="db__btn btn tab-btn" data-id="1" id="visit">Выезд на дом</div>
                                </div>
                            </div>

                            <div class="db__items">
                                <div class="db__item tab-item active" data-id="0">
                                    <div class="db__row flex">
                                        <div class="input-box _green">
                                            <label>Выберите город:</label>

                                            <select id="sity1" tabindex="-1" class="js-example-basic-single" placeholder="Выберите" data-parsley-group="basket">
                                                <option value="">Выберите</option>
                                                <option value="Москва">Москва</option>
                                                <option value="Санкт-Петербург">Санкт-Петербург</option>
                                            </select>

                                            <!-- <div class="custom-select custom-select_green">
                                                <select name="" id="" class="input-box__input req" data-parsley-group="basket1">
                                                    <option value="0">Москва</option>
                                                    <option value="city_1">Москва</option>
                                                    <option value="city_2">Санкт-Петербург</option>
                                                </select>
                                            </div> -->
                                        </div>
                                        <div class="input-box _green">
                                            <label>Выберите офис:</label>
                                            <select id="office" tabindex="-1" class="js-example-basic-single" placeholder="Выберите" data-parsley-group="basket">
                                                <option value="">Выберите</option>
                                                <option value="city_1" data-coor="[55.768821, 37.601223]">Chromolab Маяковская</option>
                                                <option value="city_2" data-coor="[55.268821, 37.601223]">Chromolab Маяковская1</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div id="map-delivery"></div>
                                </div>
                                <div class="db__item step-db tab-item" data-id="1">
                                    <div class="step-db__item">
                                        <div class="step-db__num flex-cc">01</div>
                                        <div class="step-db__wrap flex fw">
                                            <div class="step-db__col col-3">
                                                <div class="input-box">
                                                    <label>Фамилия:</label>
                                                    <input type="text" class="input-box__input" placeholder="Иванов" required data-parsley-required-message="Поле обязательно для заполнения" data-parsley-minlength="3" data-parsley-group="basket" />
                                                </div>
                                            </div>
                                            <div class="step-db__col col-3">
                                                <div class="input-box">
                                                    <label>Имя:</label>
                                                    <input type="text" class="input-box__input" placeholder="Иван" required data-parsley-required-message="Поле обязательно для заполнения" data-parsley-minlength="3" data-parsley-group="basket" />
                                                </div>
                                            </div>
                                            <div class="step-db__col col-3">
                                                <div class="input-box">
                                                    <label>Отчество:</label>
                                                    <input type="text" class="input-box__input" placeholder="Иванович" required data-parsley-required-message="Поле обязательно для заполнения" data-parsley-minlength="3" data-parsley-group="basket" />
                                                </div>
                                            </div>
                                            <div class="step-db__col col-3">
                                                <div class="input-box input-box_date">
                                                    <label>Дата рождения:</label>
                                                    <input type="date" min="1920-01-01" class="input-box__input dateFrom" placeholder="Выберите" required data-parsley-minlength="3" data-parsley-required-message="Поле обязательно к заполнению" data-parsley-group="basket" />
                                                </div>
                                            </div>
                                            <div class="step-db__col col-3">
                                                <div class="input-box">
                                                    <label>Ваш пол:</label>
                                                    <select id="select_pol" tabindex="-1" class="js-example-basic-single" placeholder="Выберите" data-parsley-group="basket">
                                                        <option value="">Выберите</option>
                                                        <option value="Мужской">Мужской</option>
                                                        <option value="Женский">Женский</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="step-db__col col-3">
                                                <div class="input-box">
                                                    <label>Количество пациентов:</label>
                                                    <div class="quantity">
                                                        <button type="button" class="quantity__button quantity__button_minus"><img src="@img/icons/minus.svg" alt="minus_icon" /></button>
                                                        <div class="quantity__input">
                                                            <input autocomplete="off" type="text" name="form[]" value="1" required />
                                                        </div>
                                                        <button type="button" class="quantity__button quantity__button_plus"><img src="@img/icons/plus.svg" alt="plus_icon" /></button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="step-db__col col-3">
                                                <div class="input-box">
                                                    <label>Телефон:</label>
                                                    <input type="text" class="input-box__input phone" placeholder="+7 (999) 999 00 99" required data-parsley-required-message="Поле обязательно к заполнению" data-parsley-pattern="\+7\s\(\d{3}\)\s\d{3}\s\d{4}" data-parsley-group="basket" data-parsley-group="basket" />
                                                </div>
                                            </div>
                                            <div class="step-db__col col-3">
                                                <div class="input-box">
                                                    <label>Почта:</label>
                                                    <input type="text" class="input-box__input" placeholder="example@gmail.com" required data-parsley-required-message="Поле обязательно для заполнения" data-parsley-type="email" data-parsley-group="basket" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="step-db__item">
                                        <div class="step-db__num flex-cc">02</div>
                                        <div class="step-db__wrap flex fw">
                                            <div class="input-box">
                                                <label>Город:</label>
                                                <input type="text" class="input-box__input" placeholder="Москва" required data-parsley-required-message="Поле обязательно для заполнения" data-parsley-minlength="3" data-parsley-group="basket" />
                                            </div>
                                            <div class="step-db__col col-2">
                                                <div class="input-box">
                                                    <label>Улица, дом, корпус:</label>
                                                    <input type="text" class="input-box__input" placeholder="ул. Новый Арбат, 115, лит. А" required data-parsley-required-message="Поле обязательно для заполнения" data-parsley-minlength="3" data-parsley-group="basket" />
                                                </div>
                                            </div>

                                            <div class="step-db__numbers col-2">
                                                <div class="input-box">
                                                    <label>Подъезд:</label>
                                                    <input type="number" class="input-box__input" placeholder="3" required data-parsley-required-message="Поле обязательно для заполнения" data-parsley-minlength="1" data-parsley-group="block2" />
                                                </div>
                                                <div class="input-box">
                                                    <label>Этаж:</label>
                                                    <input type="number" class="input-box__input" placeholder="7" required data-parsley-required-message="Поле обязательно для заполнения" data-parsley-minlength="1" data-parsley-group="block2" />
                                                </div>
                                                <div class="input-box">
                                                    <label>Квартира:</label>
                                                    <input type="number" class="input-box__input" placeholder="10" required data-parsley-required-message="Поле обязательно для заполнения" data-parsley-minlength="1" data-parsley-group="block2" />
                                                </div>
                                            </div>

                                            <div class="step-db__col col-2">
                                                <div class="input-box input-box_date">
                                                    <label>Дата выезда:</label>
                                                    <input type="date" class="input-box__input dateFrom" placeholder="01.08.1980" data-date-format="MM/DD/YYYY" required data-parsley-minlength="10" data-parsley-required-message="Поле обязательно к заполнению" data-parsley-group="block2" />
                                                </div>
                                            </div>
                                            <div class="step-db__col col-2">
                                                <div class="input-box">
                                                    <label>Время выезда:</label>

                                                    <select id="time1" tabindex="-1" class="js-example-basic-single" placeholder="Выберите" data-parsley-group="basket">
                                                        <option value="">Выберите</option>
                                                        <option value="06:00">06:00</option>
                                                        <option value="07:00">07:00</option>
                                                        <option value="08:00">08:00</option>
                                                        <option value="09:00">09:00</option>
                                                        <option value="10:00">10:00</option>
                                                    </select>

                                                    <!-- <div class="custom-select">
                                                        <select name="" id="" class="input-box__input" placeholder="Выберите" required data-parsley-minlength="4" data-parsley-group="block2">
                                                            <option value="06:00">06:00</option>
                                                            <option value="07:00">07:00</option>
                                                            <option value="08:00">08:00</option>
                                                            <option value="09:00">09:00</option>
                                                            <option value="10:00">10:00</option>
                                                        </select>
                                                    </div> -->
                                                </div>
                                            </div>
                                            <div class="step-db__col col-2">
                                                <div class="input-box">
                                                    <label>Комментарий:</label>
                                                    <textarea name="" id="" class="input" placeholder="Дополнительная информация, необходимость пропуска, код домофона" data-parsley-group="basket"></textarea>
                                                </div>
                                            </div>
                                            <div class="step-db__col col-2">
                                                <div class="input-box">
                                                    <label>Корпоративный клиент:</label>
                                                    <input type="number" class="input-box__input" placeholder="Номер заказа" required data-parsley-required-message="Поле обязательно для заполнения" data-parsley-minlength="3" data-parsley-group="basket" />
                                                </div>
                                            </div>
                                            <div class="step-db__col col-2">
                                                <div class="input-box file">
                                                    <label>Прикрепите назначения (опционально):</label>
                                                    <div class="file__wrap">
                                                        <label class="file__label flex cv" for="file-result">
                                                            <svg>
                                                                <use xlink:href="img/sprite.svg#clip"></use>
                                                            </svg>
                                                            Добавьте файлы (до 10)
                                                        </label>
                                                        <input type="file" id="file-result" class="file__input" multiple />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="person-data" class="basket__item">
                        <div class="ob">
                            <div class="ob__head flex sb cv">
                                <h3 class="basket__subtitle">Кто будет сдавать анализы?</h3>
                                <a href="#" class="btn btn-primary">Войти в личный кабинет</a>
                                <div class="custom-select custom-select_green custom-select_green_down">
                                    <select name="" id="" class="input-box__input">
                                        <option value="0" checked>Выбрать пациента</option>
                                        <option value="1">Пациент 1</option>
                                        <option value="2">Пациент 2</option>
                                    </select>
                                </div>
                            </div>
                            <div class="ob__row flex">
                                <div class="input-box">
                                    <label>Ваше ФИО:</label>
                                    <input type="text" class="input-box__input" placeholder="Иванов Иван Иванович" required data-parsley-required-message="Поле обязательно для заполнения" data-parsley-minlength="3" data-parsley-group="basket" />
                                </div>

                                <div class="input-box">
                                    <label>Ваша почта:</label>
                                    <input type="text" class="input-box__input" placeholder="example@gmail.com" required data-parsley-required-message="Поле обязательно для заполнения" data-parsley-type="email" data-parsley-group="basket" />
                                </div>
                            </div>
                            <div class="ob__row">
                                <div class="ob__col flex">
                                    <div class="input-box">
                                        <label>Ваш пол:</label>
                                        <select id="select_pol2" tabindex="-1" class="js-example-basic-single" placeholder="Выберите" data-parsley-group="basket">
                                            <option value="">Выберите</option>
                                            <option value="Мужской">Мужской</option>
                                            <option value="Женский">Женский</option>
                                        </select>
                                    </div>
                                    <div class="input-box input-box_date">
                                        <label>Дата рождения:</label>
                                        <input type="date" min="1920-01-01" class="input-box__input dateFrom" placeholder="Выберите" required data-parsley-minlength="3" data-parsley-required-message="Поле обязательно к заполнению" data-parsley-group="basket" />
                                    </div>
                                </div>
                                <div class="input-box">
                                    <label>Ваш телефон:</label>
                                    <input type="text" class="input-box__input phone" placeholder="+7 (999) 999 00 99" required data-parsley-required-message="Поле обязательно к заполнению" data-parsley-pattern="\+7\s\(\d{3}\)\s\d{3}\s\d{4}" data-parsley-group="basket" data-parsley-group="basket" />
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="basket__item">
                        <div class="order">
                            <div class="order__top flex sb">
                                <div class="order__left">
                                    <h3 class="basket__subtitle">Общая стоимость:</h3>
                                    <p class="order__links" data-da=".order,1023,2">Оформляя заказ, вы принимаете условия <a href="#" class="link-hover">Соглашения</a> и <a href="#" class="link-hover">Политики ОПД</a></p>
                                </div>
                                <div class="price-one">
                                    <div class="price-one__price">44 980 руб.</div>
                                    <div class="price-one__wrap flex cv">
                                        <div class="price-one__text flex cv">
                                            <div><img src="@img/icons/split.svg" alt="split_icon" /></div>
                                            <span>11 245 ₽</span>
                                        </div>
                                        <div class="price-one__count">х 4 платежа в Сплит</div>
                                    </div>
                                </div>
                            </div>
                            <div class="order__btns flex">
                                <button type="button" class="btn btn-primary">Оплатить картой</button>
                                <button type="button" class="btn btn-primary">Оплатить в офисе</button>
                                <button type="button" class="btn btn-black">
                                    <span><img src="@img/icons/split.svg" alt="split_icon" /></span>
                                    Оплатить частями
                                </button>
                            </div>
                            <div class="order__bottom">
                                <button type="button" class="btn btn-outline">
                                    Поделиться корзиной
                                    <span>
                                        <svg class="icon">
                                            <use xlink:href="img/sprite.svg#share"></use>
                                        </svg>
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </main>
        <script>
            var myMap;
            function maps(coor) {
                if (document.getElementById("map-delivery")) {
                    ymaps.ready(init);

                    function init() {
                        myMap = new ymaps.Map("map-delivery", {
                            center: coor,
                            zoom: 16,
                            controls: []
                        });

                        myPlacemark = new ymaps.Placemark(
                            coor,
                            { iconCaption: "" },
                            {
                                preset: "islands#redIcon"
                            }
                        );

                        myMap.events.add("click", function () {
                            myMap.behaviors.enable("scrollZoom");
                        });
                        myMap.geoObjects.add(myPlacemark);
                    }
                }
            }
            maps([55.768821, 37.601223]);

            document.addEventListener(
                "DOMContentLoaded",
                function () {
                    document.querySelectorAll(".custom-select-map .select-items div").forEach((e) =>
                        e.addEventListener("click", () => {
                            myMap.destroy();
                            myMap = null;
                            maps(JSON.parse(e.dataset.coor));
                        })
                    );
                },
                false
            );
        </script>
        @@include('components/footer/footer.html', {})
    </body>
</html>
